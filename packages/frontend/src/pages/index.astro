---
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/header/Header.astro";
import Main from "@/components/main/Main.astro";

const stage = process.env.ASTRO_STAGE;
const bucket = process.env.ASTRO_BUCKET;
const apiURL = process.env.ASTRO_API_URL;
const clerkSignInURL = process.env.CLERK_SIGN_IN_URL;
const { getToken } = Astro.locals.auth();
const token = await getToken();
const { user } = Astro.locals;
---

<Layout>
    <Header />
    <Main
        ><article>
            <p>welcom back! <strong>{user.username}</strong></p>
            <p>stage: <code>{stage}</code></p>
            <p>bucket: <code>{bucket}</code></p>
            <p>apiURL: <code>{apiURL}</code></p>
            <p>clerk signin url: <code>{clerkSignInURL}</code></p>
            <p>token: <pre>{token}</pre></p>
        </article>
    </Main>
</Layout>
